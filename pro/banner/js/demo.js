function Banner(t){function e(){var e=document.createDocumentFragment();r=t.map(function(t,s){var a=document.createElement("a");a.title=t.name,a.href=t.anchorHref,a.style.backgroundImage="url("+t.imageUrl+")",e.appendChild(a);var d,u,f,L;return a.addEventListener("touchstart",function(t){clearInterval(o),u=Date.now(),f=0,v=s,m=n("previous"),p=n(),d=t.touches[0].clientX},0),a.addEventListener("touchmove",function(t){f=t.touches[0].clientX-d,L=f>0,this.style.left=f+"px",L?(r[m].style.left=f-l+"px",r[p].style.left=null):(r[m].style.left=null,r[p].style.left=f+l+"px")},0),a.addEventListener("touchend",function(t){Math.abs(f)>l/2||Date.now()-u<300?(L?(p=v,v=n("previous"),m=n("previous")):(m=v,v=n(),p=n()),this.classList.add(L?"ltr":"rtl"),r[v].classList.add("init")):(this.classList.add("init"),L?r[m].classList.add("rtl"):r[p].classList.add("ltr")),i()},0),a.addEventListener("animationend",function(t){"current"===t.animationName&&(r[v].classList.remove("current"),r[v].style.left=0),"previous"===t.animationName&&(r[m].classList.remove("previous"),r[m].style.left=l+"px"),"ltr"===t.animationName&&(r[p].style.left=null,r[p].classList.remove("ltr"),r[v].classList.remove("init"),c[p].classList.remove("current"),c[v].classList.add("current")),"rtl"===t.animationName&&(r[m].style.left=l+"px",r[m].classList.remove("rtl"),r[v].classList.remove("init"),c[m].classList.remove("current"),c[v].classList.add("current")),"init"===t.animationName&&(r[v].style.left=0)},0),a}),d.appendChild(e)}function n(t){var e;return e="previous"===t?v>0?v-1:u-1:v>u-2?0:v+1}function s(){var e=document.createElement("div");e.className="indicator",c=t.map(function(t,n){var s=document.createElement("em");return s.appendChild(document.createTextNode(n+1)),e.appendChild(s),s.addEventListener("touchend",function(){m=v,v=n,a(),this.classList.add("current")},0),s}),c[0].classList.add("current"),d.appendChild(e)}function a(){r[m].classList.remove("current"),r[m].classList.add("previous"),r[v].classList.remove("previous"),r[v].classList.add("current"),c[m].classList.remove("current"),c[v].classList.add("current")}function i(){o=setInterval(function(){m=v,v=n(),p=n(),a()},4e3)}var r,c,l,o,d=t.position,t=t.option,u=t.length,m=u-1,v=0,p=1;e(),l=r[0].offsetWidth,s(),i()}var banner=document.querySelector(".banner");ajax({url:"http://www.ikindness.cn/api/test/get",success:function(t){new Banner({position:banner,option:t.data})}});